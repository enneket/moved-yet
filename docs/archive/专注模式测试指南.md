# 专注模式测试指南

## 测试前准备

1. 编译代码：
```bash
npm run compile
```

2. 按 F5 启动调试模式

3. 验证状态栏显示：
   - 启动后应该在状态栏右侧看到 "🎯 进入专注模式" 按钮
   - 如果没有看到，检查控制台日志

## 功能测试清单

### 1. 基础功能测试

#### 1.1 启动专注模式
- [ ] 通过命令面板启动专注模式
  - 打开命令面板 (Ctrl+Shift+P)
  - 输入 "Toggle Focus Mode"
  - 输入时长（如：30）
  - 验证状态栏显示 "🎯 专注模式 (30分钟)"

- [ ] 通过状态栏启动专注模式
  - 点击状态栏 "🎯 进入专注模式"
  - 输入时长（如：60）
  - 验证状态栏更新

#### 1.2 专注模式期间
- [ ] 验证提醒被暂停
  - 启动专注模式
  - 等待原本应该触发的提醒时间
  - 确认没有提醒弹出

- [ ] 验证状态栏显示
  - 检查状态栏显示剩余时间
  - 鼠标悬停查看提示信息
  - 确认显示正确

#### 1.3 退出专注模式
- [ ] 手动退出
  - 点击状态栏专注模式按钮
  - 验证提示消息 "专注模式已结束"
  - 确认提醒恢复正常

- [ ] 自动退出（快速测试）
  - 启动1分钟专注模式
  - 等待1分钟
  - 验证自动退出并显示提示
  - 确认提醒恢复

### 2. 边界条件测试

#### 2.1 时长验证
- [ ] 最小值测试
  - 输入 1 分钟
  - 验证接受

- [ ] 最大值测试
  - 输入 480 分钟
  - 验证接受

- [ ] 无效值测试
  - 输入 0
  - 验证拒绝并提示错误
  - 输入 481
  - 验证拒绝并提示错误
  - 输入非数字
  - 验证拒绝并提示错误

#### 2.2 重复启动测试
- [ ] 专注模式期间再次启动
  - 启动专注模式
  - 尝试再次启动
  - 验证行为（应该先退出再启动）

### 3. 集成测试

#### 3.1 与其他功能集成
- [ ] 工作时长统计
  - 启动专注模式
  - 验证工作时长仍在统计
  - 查看历史记录确认

- [ ] 活动检测
  - 启动专注模式
  - 测试活动检测命令
  - 验证活动检测仍在工作

- [ ] 历史记录
  - 启动专注模式前后
  - 查看历史记录
  - 确认数据正常

#### 3.2 配置变更
- [ ] 修改默认时长
  - 在设置中修改 `focusModeDefaultDuration`
  - 启动专注模式
  - 验证默认值已更新

### 4. 状态栏测试

#### 4.1 启动时显示
- [ ] 插件启动后立即显示
  - 启动 VS Code 或重新加载窗口
  - 验证状态栏右侧显示 "🎯 进入专注模式"
  - 验证按钮可点击

#### 4.2 显示状态
- [ ] 未启动时
  - 验证显示 "🎯 进入专注模式"
  - 验证提示信息

- [ ] 运行中
  - 验证显示 "🎯 专注模式 (X分钟)"
  - 验证提示信息包含剩余时间

#### 4.3 更新频率
- [ ] 启动2分钟专注模式
  - 观察状态栏更新
  - 验证每分钟更新一次

### 5. 错误处理测试

#### 5.1 异常情况
- [ ] 取消输入
  - 启动专注模式
  - 在输入框点击取消
  - 验证不启动专注模式

- [ ] 空输入
  - 启动专注模式
  - 输入框留空
  - 验证不启动专注模式

### 6. 性能测试

#### 6.1 长时间运行
- [ ] 启动长时间专注模式（如120分钟）
  - 观察内存使用
  - 观察CPU使用
  - 验证状态栏正常更新

## 快速测试脚本

### 测试1：基础流程（5分钟）
```
1. 启动专注模式（输入 2）
2. 等待 1 分钟，观察状态栏更新
3. 手动退出专注模式
4. 验证提醒恢复
```

### 测试2：自动结束（3分钟）
```
1. 启动专注模式（输入 1）
2. 等待 1 分钟
3. 验证自动退出
4. 验证提醒恢复
```

### 测试3：配置测试（2分钟）
```
1. 修改设置：focusModeDefaultDuration = 90
2. 启动专注模式
3. 验证默认值为 90
4. 取消
```

## 测试结果记录

### 测试环境
- VS Code 版本：
- 操作系统：
- 测试日期：

### 测试结果
| 测试项 | 结果 | 备注 |
|--------|------|------|
| 启动专注模式 | ✅/❌ | |
| 暂停提醒 | ✅/❌ | |
| 状态栏显示 | ✅/❌ | |
| 手动退出 | ✅/❌ | |
| 自动退出 | ✅/❌ | |
| 时长验证 | ✅/❌ | |
| 工作时长统计 | ✅/❌ | |
| 配置更新 | ✅/❌ | |

## 已知问题

（记录测试中发现的问题）

## 改进建议

（记录测试中的改进想法）
