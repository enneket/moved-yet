# 测试新功能指南

## 📊 测试每日健康报告

### 1. 准备测试数据
首先需要有一些健康数据，可以通过以下方式快速生成：

```json
// 在 settings.json 中设置短间隔
{
    "movedYet.sitReminderInterval": 1,
    "movedYet.drinkReminderInterval": 1
}
```

等待1-2分钟，确认几次提醒，生成测试数据。

### 2. 测试自动显示
1. 重启 VS Code
2. 等待5秒
3. 应该会自动弹出每日健康报告

### 3. 测试手动查看
1. 按 `Ctrl+Shift+P` 打开命令面板
2. 输入 `daily report` 或 `每日报告`
3. 选择 `Moved Yet: View Daily Health Report`
4. 应该显示报告界面

### 4. 验证报告内容
报告应该包含：
- ✅ 健康评分（0-100分）
- ✅ 评级（优秀/良好/一般/需改进）
- ✅ 起身次数统计
- ✅ 喝水次数统计
- ✅ 工作时长统计
- ✅ 个性化健康建议
- ✅ 查看仪表盘按钮

### 5. 测试配置开关
```json
{
    "movedYet.enableDailyReport": false
}
```
重启后应该不会自动显示报告。

---

## 🌙 测试深色模式适配

### 1. 测试健康仪表盘

#### 浅色主题测试
1. 切换到浅色主题（如 Light+）
2. 运行命令：`Moved Yet: View Health Dashboard`
3. 验证：
   - ✅ 背景色为浅色
   - ✅ 文字为深色
   - ✅ 卡片背景为白色/浅灰色
   - ✅ 按钮样式正常
   - ✅ 图表颜色清晰

#### 深色主题测试
1. 切换到深色主题（如 Dark+）
2. 运行命令：`Moved Yet: View Health Dashboard`
3. 验证：
   - ✅ 背景色为深色
   - ✅ 文字为浅色
   - ✅ 卡片背景为深灰色
   - ✅ 按钮样式正常
   - ✅ 图表颜色清晰

### 2. 测试提醒窗口

#### 浅色主题测试
1. 切换到浅色主题
2. 等待提醒触发（或设置短间隔）
3. 验证：
   - ✅ 背景色适配浅色主题
   - ✅ 提醒卡片背景为浅色
   - ✅ 文字清晰可读
   - ✅ 按钮样式正常

#### 深色主题测试
1. 切换到深色主题
2. 等待提醒触发
3. 验证：
   - ✅ 背景色适配深色主题
   - ✅ 提醒卡片背景为深色
   - ✅ 文字清晰可读
   - ✅ 按钮样式正常

### 3. 测试每日健康报告

#### 浅色主题测试
1. 切换到浅色主题
2. 运行命令：`Moved Yet: View Daily Health Report`
3. 验证：
   - ✅ 整体背景为浅色
   - ✅ 评分圆环颜色清晰
   - ✅ 统计卡片背景为浅色
   - ✅ 建议区域样式正常
   - ✅ 按钮样式正常

#### 深色主题测试
1. 切换到深色主题
2. 运行命令：`Moved Yet: View Daily Health Report`
3. 验证：
   - ✅ 整体背景为深色
   - ✅ 评分圆环颜色清晰
   - ✅ 统计卡片背景为深色
   - ✅ 建议区域样式正常
   - ✅ 按钮样式正常

### 4. 测试主题切换
1. 打开健康仪表盘
2. 切换 VS Code 主题（浅色 ↔ 深色）
3. 刷新仪表盘
4. 验证界面正确适配新主题

---

## 🧪 完整测试流程

### 步骤 1: 准备环境
```bash
# 编译代码
npm run compile

# 确认编译成功
echo $?  # 应该输出 0
```

### 步骤 2: 生成测试数据
```json
{
    "movedYet.sitReminderInterval": 1,
    "movedYet.drinkReminderInterval": 1,
    "movedYet.enableHistory": true,
    "movedYet.enableDailyReport": true
}
```

等待2-3分钟，确认3-4次提醒。

### 步骤 3: 测试每日报告
1. 重启 VS Code
2. 等待自动显示报告
3. 验证报告内容
4. 点击"查看仪表盘"按钮
5. 验证跳转正常

### 步骤 4: 测试深色模式
1. 浅色主题下测试所有界面
2. 深色主题下测试所有界面
3. 来回切换主题测试

### 步骤 5: 测试配置
```json
{
    "movedYet.enableDailyReport": false
}
```
重启，验证不显示报告。

```json
{
    "movedYet.enableDailyReport": true
}
```
重启，验证显示报告。

---

## ✅ 测试检查清单

### 每日健康报告
- [ ] 自动显示功能正常
- [ ] 手动查看命令可用
- [ ] 健康评分计算正确
- [ ] 评级显示正确
- [ ] 统计数据准确
- [ ] 建议内容合理
- [ ] 查看仪表盘按钮可用
- [ ] 配置开关生效

### 深色模式 - 健康仪表盘
- [ ] 浅色主题适配正常
- [ ] 深色主题适配正常
- [ ] 文字对比度清晰
- [ ] 卡片样式正确
- [ ] 按钮样式正确
- [ ] 图表颜色清晰
- [ ] 主题切换响应

### 深色模式 - 提醒窗口
- [ ] 浅色主题适配正常
- [ ] 深色主题适配正常
- [ ] 文字清晰可读
- [ ] 按钮样式正确
- [ ] 整体视觉舒适

### 深色模式 - 每日报告
- [ ] 浅色主题适配正常
- [ ] 深色主题适配正常
- [ ] 评分圆环清晰
- [ ] 统计卡片正确
- [ ] 建议区域正常
- [ ] 按钮样式正确

### 兼容性
- [ ] 现有功能正常工作
- [ ] 配置向后兼容
- [ ] 历史数据正常
- [ ] 无错误日志

---

## 🐛 常见问题排查

### 报告不显示
1. 检查是否有历史数据
2. 检查 `enableDailyReport` 配置
3. 查看控制台错误日志
4. 尝试手动查看命令

### 深色模式不生效
1. 确认已编译最新代码
2. 刷新 WebView 界面
3. 重启 VS Code
4. 检查浏览器控制台

### 评分不准确
1. 检查历史数据是否正确
2. 验证工作时长统计
3. 查看评分算法逻辑

---

## 📝 测试报告模板

```markdown
## 测试报告

**测试日期**: YYYY-MM-DD
**测试人**: 
**版本**: v0.0.2

### 每日健康报告
- 自动显示: ✅/❌
- 手动查看: ✅/❌
- 评分系统: ✅/❌
- 建议生成: ✅/❌
- 配置开关: ✅/❌

### 深色模式
- 仪表盘浅色: ✅/❌
- 仪表盘深色: ✅/❌
- 提醒窗口浅色: ✅/❌
- 提醒窗口深色: ✅/❌
- 报告浅色: ✅/❌
- 报告深色: ✅/❌

### 问题记录
1. 
2. 
3. 

### 总体评价
- 功能完整性: ⭐⭐⭐⭐⭐
- 用户体验: ⭐⭐⭐⭐⭐
- 视觉效果: ⭐⭐⭐⭐⭐
- 性能表现: ⭐⭐⭐⭐⭐

### 建议
1. 
2. 
3. 
```

---

**💡 提示**: 测试时建议使用开发者工具查看控制台日志，有助于发现潜在问题。
