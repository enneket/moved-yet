# 专注模式快速验证

## 1分钟快速验证

### 步骤1：启动插件（10秒）
```bash
# 编译代码
npm run compile

# 按 F5 启动调试
```

### 步骤2：验证状态栏（5秒）
✅ 检查项：
- [ ] 状态栏右侧显示 "🎯 进入专注模式" 按钮
- [ ] 按钮位置在其他状态栏项的右侧
- [ ] 鼠标悬停显示提示 "点击进入专注模式"

### 步骤3：启动专注模式（15秒）
1. 点击状态栏 "🎯 进入专注模式" 按钮
2. 输入 `1` (1分钟)
3. 按回车确认

✅ 检查项：
- [ ] 显示提示消息 "专注模式已启动，将持续 1 分钟后提醒"
- [ ] 状态栏更新为 "🎯 专注模式 (1分钟)"
- [ ] 鼠标悬停显示 "剩余时间: 1 分钟\n点击退出专注模式"

### 步骤4：验证提醒暂停（10秒）
✅ 检查项：
- [ ] 控制台显示 "专注模式已启动，持续 1 分钟"
- [ ] 控制台显示 "专注模式已启用，跳过久坐计时器创建"
- [ ] 控制台显示 "专注模式已启用，跳过喝水计时器创建"

### 步骤5：等待自动结束（60秒）
等待1分钟...

✅ 检查项：
- [ ] 显示提示消息 "专注模式已结束，提醒已恢复"
- [ ] 状态栏恢复为 "🎯 进入专注模式"
- [ ] 控制台显示 "专注模式已结束"
- [ ] 控制台显示计时器重新启动的日志

### 步骤6：手动退出测试（20秒）
1. 再次点击状态栏按钮
2. 输入 `5` (5分钟)
3. 立即点击状态栏按钮退出

✅ 检查项：
- [ ] 显示提示消息 "专注模式已结束，提醒已恢复"
- [ ] 状态栏恢复为 "🎯 进入专注模式"
- [ ] 提醒正常恢复

## 验证结果

### ✅ 全部通过
恭喜！专注模式功能正常工作。

### ❌ 发现问题
请记录以下信息：
1. 哪个步骤失败？
2. 实际看到的现象？
3. 控制台错误信息？
4. VS Code 版本？

## 常见问题排查

### 问题1：状态栏按钮不显示
**排查步骤**：
1. 检查控制台是否有错误
2. 查找日志 "专注模式服务已初始化"
3. 检查是否有其他插件冲突
4. 尝试重新加载窗口 (Ctrl+R)

### 问题2：点击按钮无反应
**排查步骤**：
1. 检查命令是否注册成功
2. 打开命令面板搜索 "Toggle Focus Mode"
3. 查看控制台错误日志
4. 验证 toggleFocusMode 函数是否正确导出

### 问题3：状态栏不更新
**排查步骤**：
1. 检查 updateInterval 是否正常启动
2. 查看控制台是否有定时器相关错误
3. 验证 getRemainingMinutes 函数返回值
4. 检查 focusModeState 状态是否正确

### 问题4：提醒没有暂停
**排查步骤**：
1. 检查 timerService 中的专注模式检查逻辑
2. 验证 isFocusModeActive 函数返回值
3. 查看计时器启动日志
4. 确认 clearAllTimers 被正确调用

## 调试技巧

### 查看专注模式状态
在调试控制台执行：
```javascript
// 获取专注模式状态
const { getFocusModeState } = require('./out/services/focusModeService');
console.log(getFocusModeState());
```

### 查看计时器状态
```javascript
// 获取计时器状态
const { timerState } = require('./out/services/timerService');
console.log(timerState);
```

### 强制更新状态栏
```javascript
// 手动触发状态栏更新
const { updateStatusBar } = require('./out/services/focusModeService');
updateStatusBar();
```

## 性能验证

### 内存使用
- 启动前内存：_____ MB
- 专注模式运行中：_____ MB
- 增加量：_____ MB (应该 < 5MB)

### CPU使用
- 空闲时：_____ %
- 专注模式运行中：_____ %
- 增加量：_____ % (应该 < 1%)

## 下一步

验证通过后，可以进行：
1. 完整功能测试（参考《专注模式测试指南.md》）
2. 集成测试（与其他功能配合）
3. 长时间运行测试（2-4小时）
4. 用户体验测试

---

**验证时间**：约 2 分钟  
**难度**：⭐ 简单  
**目的**：快速确认专注模式基础功能正常
