# Moved Yet 测试指南

## 🧪 测试概览

本指南提供了完整的测试流程，包括功能测试、性能测试、兼容性测试等。

## 🚀 快速测试

### 1. 安装测试
```bash
# 安装扩展
code --install-extension moved-yet-0.0.2.vsix

# 验证安装
code --list-extensions | grep moved-yet
# 应该显示: Immerse.moved-yet
```

### 2. 基础功能测试
```bash
# 重新加载 VS Code
# Ctrl+Shift+P -> "Developer: Reload Window"

# 测试命令
# Ctrl+Shift+P -> "动了么？: 显示提醒状态"
# Ctrl+Shift+P -> "动了么？: 测试活动检测"
```

## 📋 详细测试清单

### ✅ 安装与启动测试

#### 1.1 扩展安装
- [ ] 从 VSIX 文件安装成功
- [ ] 扩展在扩展列表中显示
- [ ] 扩展图标正确显示
- [ ] 扩展描述信息正确

#### 1.2 启动测试
- [ ] VS Code 启动时扩展自动激活
- [ ] 控制台无错误信息
- [ ] 扩展状态显示为"已启用"

### ✅ 基础功能测试

#### 2.1 久坐提醒测试
**配置测试间隔为 1 分钟便于测试**:
```json
{
    "movedYet.sitReminderInterval": 1,
    "movedYet.enableSitReminder": true
}
```

测试步骤:
- [ ] 等待 1 分钟后出现久坐提醒
- [ ] 提醒界面显示正确的中文/英文文本
- [ ] 点击"确认"按钮后提醒消失
- [ ] 计时器重置，重新开始计时

#### 2.2 喝水提醒测试
**配置测试间隔**:
```json
{
    "movedYet.drinkReminderInterval": 1,
    "movedYet.enableDrinkReminder": true
}
```

测试步骤:
- [ ] 等待 1 分钟后出现喝水提醒
- [ ] 提醒界面显示正确内容
- [ ] 确认功能正常工作

#### 2.3 渐进式提醒测试
**启用渐进式提醒**:
```json
{
    "movedYet.enableProgressiveReminder": true,
    "movedYet.progressiveReminderLevel1Duration": 1,
    "movedYet.progressiveReminderLevel2Duration": 1
}
```

测试步骤:
- [ ] 第一级：状态栏显示提醒图标
- [ ] 第二级：弹出通知消息
- [ ] 第三级：全屏提醒界面
- [ ] 各级之间的时间间隔正确

### ✅ 新功能测试 (v0.0.2)

#### 3.1 活动检测基础测试
**启用活动检测**:
```json
{
    "movedYet.enableActivityDetection": true,
    "movedYet.inactivityResetTime": 1
}
```

测试步骤:
- [ ] 运行命令: `动了么？: 测试活动检测`
- [ ] 查看当前无活动时长显示
- [ ] 活动检测状态显示为"已启用"

#### 3.2 自动重置测试
测试步骤:
1. [ ] 停止所有操作 1 分钟以上
2. [ ] 进行任意编辑操作（输入文字）
3. [ ] 观察是否出现"检测到您刚回到工作状态"提示
4. [ ] 验证计时器是否已重置

#### 3.3 活动类型检测测试
测试各种活动是否被正确检测:
- [ ] **键盘输入**: 在编辑器中输入文字
- [ ] **鼠标点击**: 点击编辑器不同位置
- [ ] **文件切换**: 切换不同的文件标签
- [ ] **命令执行**: 运行任意 VS Code 命令
- [ ] **选择操作**: 选择文本内容

每种操作后运行测试命令，验证无活动时长是否重置为 0。

### ✅ 配置测试

#### 4.1 配置变更测试
测试配置实时生效:
- [ ] 修改提醒间隔，验证计时器重置
- [ ] 启用/禁用功能，验证状态变化
- [ ] 修改语言设置，验证界面文本变化
- [ ] 修改活动检测设置，验证功能开关

#### 4.2 配置验证测试
测试配置边界值:
- [ ] 设置最小值（1分钟）
- [ ] 设置最大值（180分钟）
- [ ] 设置无效值，验证是否使用默认值

### ✅ 界面测试

#### 5.1 多语言测试
**中文测试**:
```json
{"movedYet.language": "zh-CN"}
```
- [ ] 提醒界面显示中文
- [ ] 按钮文本为中文
- [ ] 状态消息为中文

**英文测试**:
```json
{"movedYet.language": "en"}
```
- [ ] 提醒界面显示英文
- [ ] 按钮文本为英文
- [ ] 状态消息为英文

#### 5.2 UI 响应测试
- [ ] 全屏提醒界面正确显示
- [ ] 毛玻璃效果正常
- [ ] 倒计时功能正常
- [ ] 按钮点击响应正常

### ✅ 数据功能测试

#### 6.1 历史记录测试
- [ ] 确认提醒后记录被保存
- [ ] 运行命令查看历史统计
- [ ] 今日统计数据正确
- [ ] 本周统计数据正确

#### 6.2 仪表盘测试
- [ ] 运行命令: `动了么？: 查看运动仪表盘`
- [ ] 仪表盘界面正确显示
- [ ] 图表数据正确渲染
- [ ] 刷新功能正常工作

## 🔧 自动化测试

### 运行单元测试
```bash
# 运行所有测试
npm test

# 运行特定测试
npm run test -- --grep "configService"
```

### 代码质量检查
```bash
# 运行 ESLint
npm run lint

# 修复可自动修复的问题
npm run lint -- --fix

# 编译检查
npm run compile
```

## 🚀 性能测试

### 内存使用测试
1. 打开 VS Code 开发者工具: `Help > Toggle Developer Tools`
2. 切换到 `Memory` 标签
3. 记录扩展激活前后的内存使用情况
4. 验证内存使用在合理范围内（< 20MB）

### 响应性测试
- [ ] 扩展激活时间 < 200ms
- [ ] 提醒显示响应时间 < 100ms
- [ ] 配置变更响应时间 < 50ms
- [ ] 活动检测响应时间 < 10ms

## 🌐 兼容性测试

### VS Code 版本测试
- [ ] VS Code 1.100.0 (最低要求)
- [ ] VS Code 最新稳定版
- [ ] VS Code Insiders 版本

### 操作系统测试
- [ ] Windows 10/11
- [ ] macOS (Intel/Apple Silicon)
- [ ] Linux (Ubuntu/Debian)

### Node.js 版本测试
- [ ] Node.js 25.x (推荐)
- [ ] Node.js 24.x (LTS)
- [ ] Node.js 22.x (兼容性)

## 🐛 错误场景测试

### 异常处理测试
- [ ] 配置文件损坏时的处理
- [ ] 权限不足时的处理
- [ ] 网络异常时的处理
- [ ] 存储空间不足时的处理

### 边界条件测试
- [ ] 长时间运行稳定性（24小时+）
- [ ] 大量提醒记录的处理
- [ ] 频繁配置变更的处理
- [ ] 多窗口环境下的行为

## 📊 测试报告模板

### 测试环境
- **操作系统**: 
- **VS Code 版本**: 
- **Node.js 版本**: 
- **扩展版本**: v0.0.2

### 测试结果
- **通过测试**: X/Y
- **失败测试**: 
- **发现问题**: 
- **性能指标**: 

### 问题记录
| 问题描述 | 严重程度 | 复现步骤 | 状态 |
|---------|---------|---------|------|
|         |         |         |      |

## 🔄 回归测试

### 升级测试
从 v0.0.1 升级到 v0.0.2:
- [ ] 现有配置保持不变
- [ ] 历史数据完整保留
- [ ] 新功能正常工作
- [ ] 旧功能无回归问题

### 降级测试
- [ ] 卸载扩展后无残留文件
- [ ] 重新安装后功能正常
- [ ] 配置重置功能正常

## 🎯 测试最佳实践

### 测试前准备
1. 备份重要的 VS Code 配置
2. 关闭其他可能干扰的扩展
3. 确保系统资源充足

### 测试中注意事项
1. 每个测试项目独立验证
2. 记录详细的测试步骤和结果
3. 截图保存重要的测试证据

### 测试后清理
1. 恢复原始配置
2. 清理测试数据
3. 重启 VS Code 确保环境干净

---

**完整的测试确保扩展的质量和稳定性！** 🧪✅