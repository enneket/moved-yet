# Moved Yet 系统测试指南

## 🌐 系统测试概述

系统测试验证整个扩展在真实环境中的端到端功能，确保用户场景能够正确执行。

## 🎯 测试目标

- 验证完整的用户工作流程
- 测试真实使用场景下的系统行为
- 验证系统在不同环境下的稳定性
- 确保用户体验符合预期

## 🏗️ 系统测试环境

### 测试环境矩阵

| 环境类型 | 操作系统 | VS Code版本 | Node.js版本 | 测试重点 |
|---------|---------|-------------|-------------|----------|
| **开发环境** | Linux | Latest | v25.5.0 | 功能完整性 |
| **生产环境** | Windows 10/11 | Stable | v24.x+ | 兼容性 |
| **兼容环境** | macOS | Insiders | v22.x+ | 向后兼容 |
| **最小环境** | Ubuntu | v1.100.0 | v25.x | 最低要求 |

### 环境准备脚本

```bash
# 环境检查脚本
check_system_environment() {
    echo "🔍 系统环境检查"
    echo "操作系统: $(uname -s)"
    echo "VS Code版本: $(code --version | head -1)"
    echo "Node.js版本: $(node --version)"
    echo "内存: $(free -h | grep Mem | awk '{print $2}')"
    echo "磁盘空间: $(df -h . | tail -1 | awk '{print $4}')"
}
```

## 📋 系统测试场景

### 1. 完整用户工作流程测试

#### 1.1 新用户首次使用场景
**测试目标**: 验证新用户的完整体验流程

**测试步骤**:
1. **安装阶段**
   ```bash
   # 安装扩展
   code --install-extension moved-yet-0.0.2.vsix
   
   # 验证安装成功
   code --list-extensions | grep moved-yet
   ```

2. **首次启动**
   - [ ] 打开 VS Code，扩展自动激活
   - [ ] 无错误提示
   - [ ] 默认配置生效

3. **基础配置**
   - [ ] 打开设置，搜索"动了么"
   - [ ] 修改提醒间隔为测试值（2分钟）
   - [ ] 启用活动检测
   - [ ] 配置立即生效

4. **首次提醒体验**
   - [ ] 等待2分钟，出现久坐提醒
   - [ ] 界面显示正确，文本清晰
   - [ ] 点击确认，提醒消失
   - [ ] 计时器重置

5. **功能探索**
   - [ ] 使用命令面板查看所有命令
   - [ ] 测试状态查看功能
   - [ ] 查看历史记录
   - [ ] 打开仪表盘

**预期结果**: 新用户能够顺利完成所有基础操作

#### 1.2 日常工作场景测试
**测试目标**: 模拟真实的日常工作使用

**测试场景**: 8小时工作日模拟
```bash
# 工作日测试配置
{
    "movedYet.sitReminderInterval": 60,
    "movedYet.drinkReminderInterval": 45,
    "movedYet.enableActivityDetection": true,
    "movedYet.inactivityResetTime": 5,
    "movedYet.enableProgressiveReminder": true
}
```

**测试流程**:
1. **上午工作 (9:00-12:00)**
   - [ ] 连续编码3小时
   - [ ] 接收3次久坐提醒
   - [ ] 接收4次喝水提醒
   - [ ] 中途离开电脑10分钟（会议）
   - [ ] 回来后计时器自动重置

2. **午休时间 (12:00-13:00)**
   - [ ] 长时间离开电脑
   - [ ] 回来后活动检测正常工作

3. **下午工作 (13:00-18:00)**
   - [ ] 继续编码工作
   - [ ] 渐进式提醒正常工作
   - [ ] 历史记录正确累积

4. **一天结束**
   - [ ] 查看今日统计
   - [ ] 数据准确记录
   - [ ] 仪表盘显示正确

**验证点**:
- [ ] 提醒时间准确
- [ ] 活动检测敏感度合适
- [ ] 不影响正常工作
- [ ] 数据统计准确

### 2. 多场景系统测试

#### 2.1 会议场景测试
**测试目标**: 验证用户参加会议时的系统行为

**测试步骤**:
1. 正常工作中触发提醒
2. 离开电脑参加会议（30分钟）
3. 回到电脑继续工作
4. 验证系统行为

**预期结果**:
- [ ] 离开期间不会积累过期提醒
- [ ] 回来后计时器自动重置
- [ ] 显示友好的重置消息

#### 2.2 长时间编码场景测试
**测试目标**: 验证专注编码时的用户体验

**测试配置**:
```json
{
    "movedYet.enableProgressiveReminder": true,
    "movedYet.progressiveReminderLevel1Duration": 10,
    "movedYet.progressiveReminderLevel2Duration": 10
}
```

**测试步骤**:
1. 连续编码超过提醒间隔
2. 观察渐进式提醒的表现
3. 在不同级别确认提醒
4. 验证对工作流程的影响

**预期结果**:
- [ ] 第一级提醒不打断工作
- [ ] 第二级提醒可以延迟
- [ ] 第三级提醒确保健康

#### 2.3 多项目工作场景测试
**测试目标**: 验证在多个VS Code窗口中的行为

**测试步骤**:
1. 打开多个VS Code窗口
2. 在不同窗口间切换工作
3. 验证扩展在每个窗口的行为
4. 测试数据统计的准确性

**预期结果**:
- [ ] 每个窗口独立工作
- [ ] 数据统计不重复
- [ ] 活动检测正确工作

### 3. 压力测试

#### 3.1 长时间运行稳定性测试
**测试目标**: 验证扩展长时间运行的稳定性

**测试配置**:
```json
{
    "movedYet.sitReminderInterval": 5,
    "movedYet.drinkReminderInterval": 3,
    "movedYet.enableActivityDetection": true,
    "movedYet.inactivityResetTime": 1
}
```

**测试步骤**:
1. 连续运行24小时
2. 每小时检查内存使用
3. 记录所有提醒和重置
4. 监控系统资源使用

**验证点**:
- [ ] 内存使用稳定（< 50MB）
- [ ] CPU使用率正常（< 1%）
- [ ] 无内存泄漏
- [ ] 功能持续正常

#### 3.2 频繁配置变更测试
**测试目标**: 验证频繁配置变更的系统稳定性

**测试步骤**:
1. 编写脚本频繁修改配置
2. 每30秒修改一次配置
3. 持续运行1小时
4. 验证系统响应

**预期结果**:
- [ ] 配置变更及时响应
- [ ] 系统保持稳定
- [ ] 无错误或崩溃

### 4. 兼容性系统测试

#### 4.1 VS Code版本兼容性测试
**测试矩阵**:

| VS Code版本 | 测试状态 | 关键功能 | 备注 |
|------------|---------|---------|------|
| 1.100.0 | 🧪 测试中 | 基础功能 | 最低要求 |
| 1.105.0 | ✅ 通过 | 全部功能 | 稳定版 |
| Latest | ✅ 通过 | 全部功能 | 最新版 |
| Insiders | 🧪 测试中 | 全部功能 | 预览版 |

#### 4.2 操作系统兼容性测试

**Windows 测试**:
- [ ] Windows 10 (x64)
- [ ] Windows 11 (x64)
- [ ] 文件路径处理正确
- [ ] 权限管理正常

**macOS 测试**:
- [ ] macOS Intel
- [ ] macOS Apple Silicon
- [ ] 快捷键适配正确
- [ ] 通知系统集成

**Linux 测试**:
- [ ] Ubuntu 20.04+
- [ ] Debian 11+
- [ ] 桌面环境兼容
- [ ] 包管理器兼容

### 5. 性能系统测试

#### 5.1 启动性能测试
**测试目标**: 验证扩展对VS Code启动的影响

**测试方法**:
```bash
# 测试启动时间
time code --new-window --wait

# 对比启动时间（有/无扩展）
# 记录差异应 < 200ms
```

**验证点**:
- [ ] 启动时间增加 < 200ms
- [ ] 激活时间 < 100ms
- [ ] 内存占用 < 20MB

#### 5.2 运行时性能测试
**测试场景**:
1. 大文件编辑时的响应性
2. 多文件同时打开的性能
3. 长时间编辑的稳定性

**性能指标**:
- [ ] 键盘输入延迟 < 10ms
- [ ] 文件切换延迟 < 50ms
- [ ] 内存使用增长 < 1MB/小时

## 🔧 系统测试工具

### 自动化系统测试脚本